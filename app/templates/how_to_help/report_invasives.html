{% extends "layout.html" %}
{% block title %}Report Invasives - Lake Eden{% endblock title %}

{% block body %}

    <div class="container pt-5 ps-5">
        <h1 style="font-weight: bold; font-size: 45px; padding-bottom: 10px;">Report an Invasive Species or a Blue-Green Algae (Cyanobacteria) Bloom or Milfoil</h1>
        <p style="font-weight: 400; font-size: 18px; padding-bottom: 60px;">Please use the form below to report any plant or animal that you suspect might be
            invasive or if you spot a possible blue-green algae (cyanobacteria) bloom or milfoil. Weâ€™ll check out any report and let you know the results.
            Thank you for doing your part in taking care of our lake!</p>
        <form action="{% url 'create_invasive_report' %}" method="POST">
            {% csrf_token %}
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>What did you find?</strong>
                <p>Plant, animal, algae, milfoil, etc.</p>
                <input style="width: 100%; height: 50px; margin-bottom: 47px;" placeholder="....." class="form-control" type="text" maxlength="80" name="what_did_you_find" required>
            </div>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Where did you find it?</strong>
                <p>A GPS reading is great, or general location (e.g. beach, fishing access, boat access, east, west, south, etc.).</p>
                <input style="width: 100%; height: 50px; margin-bottom: 47px;" placeholder="....." class="form-control" type="text" maxlength="80" name="where_did_you_find_it" required>
            </div>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>When did you find it?</strong>
                <input style="width: 100%; height: 50px; margin-bottom: 47px;" class="form-control" type="date" max="2999-12-31" name="when_did_you_find_it">
            </div>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Under water or floating?</strong><br><br>
                <div style="padding-left: 10%; padding-right: 10%;" class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" value="under water">
                    <label class="form-check-label" for="flexRadioDefault1">
                    Under Water
                    </label>
                </div>
                <div style="padding-left: 10%; padding-right: 10%;" class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" value="floating" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                    floating
                    </label>
                </div>
            </div>
            <br><br>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Did you collect a sample?</strong>
                <p>Collect a sample if possible</p>
                <div style="padding-left: 10%; padding-right: 10%;" class="form-check">
                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="yes">
                    <label class="form-check-label" for="exampleRadios1">
                      Yes
                    </label>
                </div>
                <div style="padding-left: 10%; padding-right: 10%;" class="form-check">
                <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="no" checked>
                    <label class="form-check-label" for="exampleRadios2">
                        No
                    </label>
                </div>
            </div>
            <br><br>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Your name</strong>
                <input style="width: 100%; height: 50px; margin-bottom: 47px;" placeholder="....." class="form-control" maxlength="40" type="text" name="name">
            </div>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Your phone number</strong>
                <p>By entering this you consent to a possible call from us with questions about this report</p>
                <input style="width: 100%; height: 50px; margin-bottom: 47px;" placeholder="....." class="form-control" type="tel" maxlength="16" id="phoneNumber" name="phone_number">
            </div>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Your email address</strong>
                <p>By entering this you consent to a possible email from us with questions about this report</p>
                <input style="width: 100%; height: 50px; margin-bottom: 47px;" placeholder="....." class="form-control" type="email" maxlength="40" name="email">
            </div>
            <div style="padding-left: 4%; padding-right: 10%;" class="form-group">
                <strong style='font-size: 24px; font-weight: 500;'>Comments</strong>
                <p>Any notes, observations, or comments?</p>
                <textarea style="width: 100%; height: 90px; margin-bottom: 47px;" placeholder="....." class="form-control" maxlength="270" name="comments"></textarea>
            </div>

            <div style="padding-left: 4%;" class="form-group pt-3">
                <input class="btn btn-success" type="submit" value="Report Invasive">
            </div>
        </form>
    </div>

    <script>
        const isNumericInput = (event) => {
            const key = event.keyCode;
            return ((key >= 48 && key <= 57) || // Allow number line
                (key >= 96 && key <= 105) // Allow number pad
            );
        };

        const isModifierKey = (event) => {
            const key = event.keyCode;
            return (event.shiftKey === true || key === 35 || key === 36) || // Allow Shift, Home, End
                (key === 8 || key === 9 || key === 13 || key === 46) || // Allow Backspace, Tab, Enter, Delete
                (key > 36 && key < 41) || // Allow left, up, right, down
                (
                    // Allow Ctrl/Command + A,C,V,X,Z
                    (event.ctrlKey === true || event.metaKey === true) &&
                    (key === 65 || key === 67 || key === 86 || key === 88 || key === 90)
                )
        };

        const enforceFormat = (event) => {
            // Input must be of a valid number format or a modifier key, and not longer than ten digits
            if(!isNumericInput(event) && !isModifierKey(event)){
                event.preventDefault();
            }
        };

        const formatToPhone = (event) => {
            if(isModifierKey(event)) {return;}

            const input = event.target.value.replace(/\D/g,'').substring(0,10); // First ten digits of input only
            const areaCode = input.substring(0,3);
            const middle = input.substring(3,6);
            const last = input.substring(6,10);

            if(input.length > 6){event.target.value = `(${areaCode}) ${middle} - ${last}`;}
            else if(input.length > 3){event.target.value = `(${areaCode}) ${middle}`;}
            else if(input.length > 0){event.target.value = `(${areaCode}`;}
        };

        const inputElement = document.getElementById('phoneNumber');
        inputElement.addEventListener('keydown',enforceFormat);
        inputElement.addEventListener('keyup',formatToPhone);
    </script>

{% endblock %}